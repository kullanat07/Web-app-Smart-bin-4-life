<!doctype html>
<html>
<head>
<meta charset="utf-8">
<title>การคัดแยกขยะ</title>
<script src="file:///D|/Web Smart bin 4 life/jQueryAssets/jquery-1.11.1.min.js"></script> <script type="text/javascript">
function MM_preloadImages() { //v3.0
  var d=document; if(d.images){ if(!d.MM_p) d.MM_p=new Array();
    var i,j=d.MM_p.length,a=MM_preloadImages.arguments; for(i=0; i<a.length; i++)
    if (a[i].indexOf("#")!=0){ d.MM_p[j]=new Image; d.MM_p[j++].src=a[i];}}
}
function MM_swapImgRestore() { //v3.0
  var i,x,a=document.MM_sr; for(i=0;a&&i<a.length&&(x=a[i])&&x.oSrc;i++) x.src=x.oSrc;
}
function MM_findObj(n, d) { //v4.01
  var p,i,x;  if(!d) d=document; if((p=n.indexOf("?"))>0&&parent.frames.length) {
    d=parent.frames[n.substring(p+1)].document; n=n.substring(0,p);}
  if(!(x=d[n])&&d.all) x=d.all[n]; for (i=0;!x&&i<d.forms.length;i++) x=d.forms[i][n];
  for(i=0;!x&&d.layers&&i<d.layers.length;i++) x=MM_findObj(n,d.layers[i].document);
  if(!x && d.getElementById) x=d.getElementById(n); return x;
}

function MM_swapImage() { //v3.0
  var i,j=0,x,a=MM_swapImage.arguments; document.MM_sr=new Array; for(i=0;i<(a.length-2);i+=3)
   if ((x=MM_findObj(a[i]))!=null){document.MM_sr[j++]=x; if(!x.oSrc) x.oSrc=x.src; x.src=a[i+2];}
}
</script>
<style type="text/css">
body,td,th {
    font-family: "FC Mission Rounded [Non-cml.]";
    font-size: 18px;
}
body {
    background-color: #BCD4FF;
}
</style>
</head>

<body onLoad="MM_preloadImages('file:///D|/Web Smart bin 4 life/img/images/D-_Wed-Smatr-bin4life_img_images_Untitled-1_07.gif','file:///D|/Web Smart bin 4 life/img/images/D-_Wed-Smatr-bin4life_img_images_Untitled-1_03.gif','file:///D|/Web Smart bin 4 life/img/images/D-_Wed-Smatr-bin4life_img_images_Untitled-1_05.gif','file:///D|/Web Smart bin 4 life/img/images/D-_Wed-Smatr-bin4life_img_images_Untitled-1_06.gif','img/images/images/Untitled-42_02.png','img/images/images/Untitled-42_03.png','img/images/images/Untitled-42_05.png')">
<table width="1024" border="0" align="center" cellpadding="0" cellspacing="0">
  <tbody>
    <tr>
      <td width="1023" colspan="4"><img src="img/images/Untitled-3.gif" width="1024" height="200" alt=""/></td>
    </tr>
    <tr>
      <td><strong><a href="index.html" onMouseOut="MM_swapImgRestore()" onMouseOver="MM_swapImage('Image4','','img/images/D-_Wed-Smatr-bin4life_img_images_Untitled-1_07.gif',1)"><img src="img/images/Untitled-2_07.gif" alt="" width="229" height="59" id="Image4"></a><a href="file:///D|/Web Smart bin 4 life/index.html" onMouseOut="MM_swapImgRestore()" onMouseOver="MM_swapImage('Image4','','file:///D|/Web Smart bin 4 life/img/images/D-_Wed-Smatr-bin4life_img_images_Untitled-1_07.gif',1)"></a></strong></td>
      <td><strong><a href="p2.html" onMouseOut="MM_swapImgRestore()" onMouseOver="MM_swapImage('Image5','','img/images/D-_Wed-Smatr-bin4life_img_images_Untitled-1_03.gif',1)"><img src="img/images/Untitled-2_03.gif" alt="" width="283" height="59" id="Image5"></a><a href="file:///D|/Web Smart bin 4 life/p2.html" onMouseOut="MM_swapImgRestore()" onMouseOver="MM_swapImage('Image5','','file:///D|/Web Smart bin 4 life/img/images/D-_Wed-Smatr-bin4life_img_images_Untitled-1_03.gif',1)"></a></strong></td>
      <td><strong><a href="p3.html" onMouseOut="MM_swapImgRestore()" onMouseOver="MM_swapImage('Image6','','img/images/D-_Wed-Smatr-bin4life_img_images_Untitled-1_05.gif',1)"><img src="img/images/Untitled-2_05.gif" alt="" width="298" height="59" id="Image6"></a><a href="file:///D|/Web Smart bin 4 life/p3.html" onMouseOut="MM_swapImgRestore()" onMouseOver="MM_swapImage('Image6','','file:///D|/Web Smart bin 4 life/img/images/D-_Wed-Smatr-bin4life_img_images_Untitled-1_05.gif',1)"></a></strong></td>
      <td><strong><a href="p4.html" onMouseOut="MM_swapImgRestore()" onMouseOver="MM_swapImage('Image7','','img/images/D-_Wed-Smatr-bin4life_img_images_Untitled-1_06.gif',1)"><img src="img/images/Untitled-2_06.gif" alt="" width="213" height="59" id="Image7"></a><a href="file:///D|/Web Smart bin 4 life/p4.html" onMouseOut="MM_swapImgRestore()" onMouseOver="MM_swapImage('Image7','','file:///D|/Web Smart bin 4 life/img/images/D-_Wed-Smatr-bin4life_img_images_Untitled-1_06.gif',1)"></a></strong></td>
    </tr>
    <tr>
      <td colspan="4"><table width="1024" border="0" cellspacing="0" cellpadding="0">
        <tbody>
          <tr>
            <td><a href="p5.html" onMouseOut="MM_swapImgRestore()" onMouseOver="MM_swapImage('Image15','','img/images/images/Untitled-42_02.png',1)"><img src="img/images/images/Untitled-4_02.png" alt="" width="351" height="59" id="Image15"></a></td>
            <td><a href="p6.html" onMouseOut="MM_swapImgRestore()" onMouseOver="MM_swapImage('Image16','','img/images/images/Untitled-42_03.png',1)"><img src="img/images/images/Untitled-4_03.png" alt="" width="350" height="59" id="Image16"></a></td>
            <td><a href="p7.html" onMouseOut="MM_swapImgRestore()" onMouseOver="MM_swapImage('Image17','','img/images/images/Untitled-42_05.png',1)"><img src="img/images/images/Untitled-4_05.png" alt="" width="323" height="57" id="Image17"></a></td>
          </tr>
        </tbody>
      </table></td>
    </tr>
    <tr>
      <td height="42" colspan="4" bgcolor="#98D48B"><marquee>
        คัดแยกขยะง่าย ๆ เริ่มได้ที่ตัวเรา
      </marquee></td>
    </tr>
    <tr>
      <td height="512" colspan="4" align="center" valign="top" bgcolor="#DFEEC8"><h2><title>Waste Inquiry Assistant (ผู้ช่วยสอบถามเรื่องขยะ)</title>
    <!-- Tailwind CSS CDN -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Inter Font -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Inter', sans-serif;
            background-color: #f7f9fb;
        }
        .container-card {
            max-width: 900px;
            margin: 0 auto;
            min-height: 100vh;
            padding: 2rem 1rem;
        }
        /* Custom styles for better readability and structure in response text */
        .prose br {
            content: "";
            display: block;
            margin-bottom: 0.5em;
        }
    </style>
</head>
<body>

    <div class="container-card">
        <header class="text-center py-6 bg-white rounded-xl shadow-lg mb-8">
            <h1 class="text-4xl font-extrabold text-gray-800">
                <span class="text-emerald-600">WasteWise</span> Guide
            </h1>
            <p class="text-gray-500 mt-2">
                ระบบค้นหาข้อมูลการจัดการขยะเบื้องต้น (ไม่ต้องใช้ AI)
            </p>
        </header>

        <main class="bg-white p-6 md:p-10 rounded-xl shadow-lg">
            
            <!-- Input Area -->
            <div class="mb-8">
                <label for="queryInput" class="block text-lg font-semibold text-gray-700 mb-2">
                    สอบถามเรื่องขยะของคุณ (เช่น: ขวดแก้วต้องทิ้งถังไหน? หรือ เศษอาหารควรทำอย่างไร?)
                </label>
                <textarea id="queryInput" rows="3" 
                    class="w-full p-4 border border-gray-300 rounded-lg focus:ring-emerald-500 focus:border-emerald-500 transition duration-150 resize-none"
                    placeholder="พิมพ์ชื่อประเภทขยะที่ต้องการสอบถามที่นี่..."></textarea>
                <button id="submitButton" 
                    class="w-full mt-4 px-6 py-3 bg-emerald-600 text-white font-bold rounded-lg shadow-md hover:bg-emerald-700 transition duration-150 disabled:opacity-50 disabled:cursor-not-allowed">
                    ค้นหาคำตอบ
                </button>
            </div>

            <!-- Loading & Output Area -->
            <div id="outputArea" class="mt-8 border-t pt-6">
                <!-- Removed loadingIndicator as the process is now instant -->
                
                <div id="resultContent" class="hidden">
                    <h2 class="text-2xl font-bold text-gray-800 mb-4 flex items-center">
                        <svg class="w-6 h-6 text-emerald-600 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m5.618-4.016A11.955 11.955 0 0112 2.944c6.832 0 10.25 2.14 10.25 7.056 0 4.916-3.418 7.056-10.25 7.056S1.75 14.916 1.75 10c0-4.916 3.418-7.056 10.25-7.056z"></path></svg>
                        คำแนะนำการจัดการขยะ
                    </h2>
                    <div id="responseText" class="prose max-w-none p-4 bg-emerald-50 border-l-4 border-emerald-600 rounded-lg">
                        <!-- Response text will be inserted here -->
                    </div>
                </div>

                <!-- Removed sourcesArea and sourcesList -->

                <div id="errorBox" class="hidden mt-6 p-4 bg-red-100 border-l-4 border-red-500 text-red-700 rounded-lg">
                    <p class="font-semibold">ไม่พบข้อมูล:</p>
                    <p id="errorMessage"></p>
                </div>

            </div>
        </main>
    </div>

    <!-- Firebase SDKs - Kept for canvas environment compatibility but not actively used for waste lookup -->
    <script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-app.js";
        import { getAuth, signInAnonymously, signInWithCustomToken, onAuthStateChanged } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-auth.js";
        import { getFirestore, setLogLevel } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-firestore.js";

        // Global Firebase variables (provided by the Canvas environment)
        const appId = typeof __app_id !== 'undefined' ? __app_id : 'default-app-id';
        const firebaseConfig = typeof __firebase_config !== 'undefined' ? JSON.parse(__firebase_config) : null;
        const initialAuthToken = typeof __initial_auth_token !== 'undefined' ? __initial_auth_token : null;

        let db, auth;

        // Initialize Firebase and Auth
        if (firebaseConfig) {
            try {
                const app = initializeApp(firebaseConfig);
                db = getFirestore(app);
                auth = getAuth(app);
                setLogLevel('Debug'); // Enable Firestore logging

                // Sign in logic
                if (initialAuthToken) {
                    signInWithCustomToken(auth, initialAuthToken)
                        .then(() => console.log("Firebase signed in with custom token."))
                        .catch(error => console.error("Error signing in with custom token:", error));
                } else {
                    signInAnonymously(auth)
                        .then(() => console.log("Firebase signed in anonymously."))
                        .catch(error => console.error("Error signing in anonymously:", error));
                }
            } catch (e) {
                console.error("Firebase initialization failed:", e);
                // Note: Keeping error handling for Firebase even if not used for waste lookup
            }
        }
    </script>

    <!-- Core Waste Lookup Functionality (Client-side, No AI) -->
    <script type="module">
        const queryInput = document.getElementById('queryInput');
        const submitButton = document.getElementById('submitButton');
        const resultContent = document.getElementById('resultContent');
        const responseText = document.getElementById('responseText');
        const errorBox = document.getElementById('errorBox');
        const errorMessage = document.getElementById('errorMessage');

        // Hardcoded Waste Data (Pre-defined Lookup)
        const WASTE_DATA = {
            "ขวดแก้ว": "ขยะรีไซเคิล (Recyclable Waste) - ควรล้างทำความสะอาดก่อนทิ้ง สามารถทิ้งในถังสีเหลือง หรือนำไปขายที่ร้านรับซื้อของเก่า.",
            "เศษอาหาร": "ขยะอินทรีย์ (Organic Waste) - สามารถนำไปทำปุ๋ยหมัก หรือทิ้งในถังสีเขียวเพื่อนำไปกำจัดแบบพิเศษ.",
            "ถุงพลาสติก": "ขยะรีไซเคิล (Recyclable Waste) - ทำความสะอาดและทำให้แห้งก่อนมัดรวมกันเพื่อทิ้งในถังสีเหลือง.",
            "หน้ากากอนามัย": "ขยะอันตราย/ติดเชื้อ (Hazardous Waste) - ควรใส่ถุงปิดให้มิดชิดแล้วทิ้งในถังขยะสีแดงหรือถังขยะติดเชื้อ.",
            "กระดาษ": "ขยะรีไซเคิล (Recyclable Waste) - มัดรวมกันเพื่อทิ้งในถังสีเหลือง.",
            "หลอดไฟ": "ขยะอันตราย (Hazardous Waste) - ควรนำไปทิ้งจุดรับทิ้งขยะอันตรายเฉพาะที่กำหนด เช่น จุดรับคืนของห้างสรรพสินค้าหรือสำนักงานเขต.",
            "แบตเตอรี่": "ขยะอันตราย (Hazardous Waste) - ห้ามทิ้งรวมกับขยะทั่วไป ให้นำไปทิ้งที่จุดรับทิ้งแบตเตอรี่เฉพาะทาง.",
            "กล่องนม": "ขยะรีไซเคิล (Recyclable Waste) - ล้างทำความสะอาด ตัด/พับให้เรียบร้อย ก่อนทิ้งในถังสีเหลือง.",
            "ผ้าอ้อม": "ขยะทั่วไป (General Waste) - ใส่ถุงปิดให้มิดชิดแล้วทิ้งในถังสีน้ำเงินหรือสีดำ.",
            "โฟม": "ขยะทั่วไป (General Waste) - เนื่องจากรีไซเคิลยากในปัจจุบัน ควรใส่ถุงปิดให้มิดชิดแล้วทิ้งในถังสีน้ำเงิน/สีดำ.",
            "ยางรถยนต์": "ขยะทั่วไป/ของเหลือใช้ขนาดใหญ่ - ควรติดต่อหน่วยงานท้องถิ่นเพื่อการกำจัดที่เหมาะสม หรือนำไปที่ศูนย์รับรีไซเคิลเฉพาะทาง.",
        };

        /**
         * Looks up the waste item in the hardcoded data.
         * @param {string} query - The user's question/item.
         */
        function lookupWaste(query) {
            // Simple cleanup for better lookup
            const normalizedQuery = query.toLowerCase().trim();

            for (const item in WASTE_DATA) {
                if (normalizedQuery.includes(item)) {
                    return `**ข้อมูลสำหรับ ${item}:**<br>${WASTE_DATA[item]}`;
                }
            }

            return null; // Not found
        }

        // Event listener for the submit button
        submitButton.addEventListener('click', () => {
            const query = queryInput.value.trim();
            
            // 1. Hide previous results and error box
            resultContent.classList.add('hidden');
            errorBox.classList.add('hidden');
            
            if (query) {
                const result = lookupWaste(query);
                
                if (result) {
                    // 2. Display Result
                    responseText.innerHTML = result.replace(/\n/g, '<br>');
                    resultContent.classList.remove('hidden');
                } else {
                    // 3. Display Not Found Error
                    errorMessage.innerHTML = `ไม่พบข้อมูลสำหรับ **"${query}"** ในฐานข้อมูล กรุณาลองใช้คำหลักอื่น เช่น "แบตเตอรี่", "เศษอาหาร" หรือ "ขวดแก้ว".`;
                    errorBox.classList.remove('hidden');
                    resultContent.classList.add('hidden');
                }

            } else {
                // Handle empty query
                errorMessage.textContent = 'กรุณาพิมพ์ชื่อประเภทขยะของคุณก่อน';
                errorBox.classList.remove('hidden');
            }
        });

        // Initial state update
        document.addEventListener('DOMContentLoaded', () => {
            responseText.innerHTML = 'ยินดีต้อนรับสู่ WasteWise Guide! พิมพ์ชื่อขยะที่คุณต้องการทราบวิธีทิ้งได้เลย (เช่น ขวดแก้ว, เศษอาหาร, หลอดไฟ)';
            resultContent.classList.remove('hidden');
        });

    </script><br>
      </h2></td>
    </tr>
    <tr>
      <td colspan="4"><img src="img/images/Untitled-5_13.png" width="1024" height="139" alt=""/></td>
    </tr>
  </tbody>
</table>
</body>
</html>
